{% load static %}
{% load humanize %}
<div class="preloader"><button class="th-btn style3 preloaderCls">Cancel Preloader</button>
    <div class="preloader-inner"><span class="loader"></span></div>
</div>

<div id="QuickView" class="white-popup mfp-hide">
    <div class="container bg-white">
        <div class="row">
            <div class="col-lg-7">
                <div class="product-thumb-area">
                    <div class="product-thumb-tab" data-asnavfor=".product-big-img">
                        <div class="tab-btn active"><img src="{% static 'assets/img/menu/menu_thumb_1_1.png' %}"
                                alt="Product Thumb"></div>
                        <div class="tab-btn"><img src="{% static 'assets/img/menu/menu_thumb_1_2.png' %}"
                                alt="Product Thumb">
                        </div>
                        <div class="tab-btn"><img src="{% static 'assets/img/menu/menu_thumb_1_3.png' %}"
                                alt="Product Thumb">
                        </div>
                        <div class="tab-btn"><img src="{% static 'assets/img/menu/menu_thumb_1_4.png' %}"
                                alt="Product Thumb">
                        </div>
                        <div class="tab-btn"><img src="{% static 'assets/img/menu/menu_thumb_1_5.png' %}"
                                alt="Product Thumb">
                        </div>
                    </div>
                    <div class="product-big-img th-carousel" data-slide-show="1" data-md-slide-show="1"
                        data-fade="true">
                        <div class="col-auto">
                            <div class="img"><img src="{% static 'assets/img/menu/product_details_1_1.png' %}"
                                    alt="Product Image">
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="img"><img src="{% static 'assets/img/menu/product_details_1_2.png' %}"
                                    alt="Product Image">
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="img"><img src="{% static 'assets/img/menu/product_details_1_3.png' %}"
                                    alt="Product Image">
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="img"><img src="{% static 'assets/img/menu/product_details_1_4.png' %}"
                                    alt="Product Image">
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="img"><img src="{% static 'assets/img/menu/product_details_1_5.png' %}"
                                    alt="Product Image">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 align-self-center">
                <div class="product-about">
                    <div class="product-rating">
                        <div class="star-rating" role="img" aria-label="Rated 5.00 out of 5"><span
                                style="width:100%">Rated <strong class="rating">5.00</strong> out of 5 based on
                                <span class="rating">1</span> customer rating</span></div><a href="shop-details.html"
                            class="woocommerce-review-link">(<span class="count">3</span>
                            customer reviews)</a>
                    </div>
                    <h2 class="product-title">Chicken Masala</h2>
                    <p class="price">$180.85<del>$350.99</del></p>
                    <p class="text">There are many variations of passages of lorem Ipum available theresu anything
                        embarrassing It’s a long established fact that a reader will be looking at its layout.</p>
                    <div class="actions">
                        <div class="quantity"><input type="number" class="qty-input" step="1" min="1" max="100"
                                name="quantity" value="1" title="Qty"> <button class="quantity-plus qty-btn"><i
                                    class="far fa-chevron-up"></i></button> <button class="quantity-minus qty-btn"><i
                                    class="far fa-chevron-down"></i></button></div>
                        <button class="th-btn">Add to Cart</button> <a class="icon-btn" href="wishlist.html"><i
                                class="fal fa-heart"></i></a>
                    </div>
                    <div class="product_meta"><span class="sku_wrapper">SKU: <span class="sku">C2546</span></span>
                        <span class="posted_in">Category: <a href="shop.html" rel="tag">Chicken Pizza</a></span>
                        <span>Tags: <a href="shop.html">Fast Food</a><a href="shop.html">Grill</a></span>
                    </div>
                    <div class="share">
                        <p class="share-title"><i class="fa-solid fa-share"></i> Share</p>
                        <div class="th-social"><a target="_blank" href="https://facebook.com/"><i
                                    class="fab fa-facebook-f"></i></a> <a target="_blank" href="https://twitter.com/"><i
                                    class="fab fa-twitter"></i></a> <a target="_blank" href="https://instagram.com/"><i
                                    class="fab fa-instagram"></i></a> <a target="_blank" href="https://linkedin.com/"><i
                                    class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div><button title="Close (Esc)" type="button" class="mfp-close">×</button>
    </div>
</div>

<div class="sidemenu-wrapper d-none d-lg-block">
    <div class="sidemenu-content"><button class="closeButton sideMenuCls"><i class="far fa-times"></i></button>
        <div class="widget woocommerce widget_shopping_cart">
            <h3 class="widget_title">Shopping cart</h3>
            <div class="widget_shopping_cart_content">
                <ul class="woocommerce-mini-cart cart_list product_list_widget">
                {% for item in cart_items %}
                    <li class="woocommerce-mini-cart-item mini_cart_item">
                        <a href="" class="remove remove_from_cart_button"><i class="far fa-times"></i></a> 
                        <a href="#"><img src="{{ item.product.image.url }}" alt="Cart Image">{{ item.product.title }}</a> 
                        <span class="quantity">{{ item.quantity }} × <span class="woocommerce-Price-amount amount">
                        <span class="woocommerce-Price-currencySymbol">$</span>{{ item.product.disPrice|intcomma }}</span></span>
                    </li>
                {% endfor %}
                </ul>
                <p class="woocommerce-mini-cart__total total"><strong>Subtotal:</strong> <span
                        class="woocommerce-Price-amount amount"><span
                            class="woocommerce-Price-currencySymbol">$</span>{{ item.total_price|floatformat:2|intcomma }}</span></p>
                <p class="woocommerce-mini-cart__buttons buttons"><a href="{% url 'cartPage' %}"
                        class="th-btn wc-forward">View
                        cart</a> <a href="{% url 'checkout' %}" class="th-btn checkout wc-forward">Checkout</a></p>
            </div>
        </div>
    </div>
</div>

<div class="popup-search-box d-none d-lg-block">
    <button class="searchClose"><i class="fal fa-times"></i></button>
    <form action="" method="GET">
        <input type="text" name="q" placeholder="What are you looking for?">
        <button type="submit"><a href="{% url 'shopPage' %}"><i class="fal fa-search"></i></a></button>
    </form>
</div>

<div class="th-menu-wrapper">
    <div class="th-menu-area text-center"><button class="th-menu-toggle"><i class="fal fa-times"></i></button>
        <div class="mobile-logo">
            <a href="{% url 'homePage' %}"><h1 style="font-size: xx-large;">Restaurant</h1></a>
        </div>
        <div class="th-mobile-menu">
            <ul>
                <li><a href="{% url 'homePage' %}">Home</a>
                </li>
                <li><a href="{% url 'menuPage' %}">Menu</a>
                </li>
                <li><a href="{% url 'shopPage' %}">Shop</a></li>
                <li><a href="{% url 'newPage' %}">News</a></li>
                <li><a href="{% url 'contactPage' %}">Contact Us</a></li>
{% if request.user.is_authenticated %}    
            <li><a href="{% url 'logout' %}">Logout</a></li>

            {% if request.user.role == "admin" %}              
                <li><a href="{% url 'admin_dashboard' %}">AdminDashboard</a></li>
            {% endif %}
{% else %}   
            <li><a href="{% url 'loginPage' %}">Login</a></li>
            <li><a href="{% url 'registerPage' %}">Register</a></li>
{% endif %}
            </ul>
        </div>
    </div>
</div>

<header class="th-header header-layout3">
    <div class="sticky-wrapper">
        <div class="sticky-active">
            <div class="menu-area">
                <div class="container th-container">
                    <div class="row align-items-center justify-content-between">
                        <div class="col-auto">
                            <div class="header-logo">
                                <a href="{% url 'homePage' %}"><h1 style="font-size: xx-large;">Restaurant</h1></a>
                            </div>
                        </div>
                        <div class="col-auto">
                            <nav class="main-menu d-none d-lg-inline-block">
                                <ul>
                                    <li><a href="{% url 'homePage' %}">Home</a>
                                    </li>
                                    <li><a href="{% url 'menuPage' %}">Menu</a>
                                    </li>
                                    <li><a href="{% url 'shopPage' %}">Shop</a></li>
                                    <li><a href="{% url 'newPage' %}">News</a></li>
                                    <li><a href="{% url 'contactPage' %}">Contact Us</a></li>
                                </ul>
                            </nav><button type="button" class="th-menu-toggle d-inline-block d-lg-none"><i
                                    class="far fa-bars"></i></button>
                        </div>
                        <div class="col-auto d-none d-xl-block">
                            <div class="header-button">
                                <button type="button" class="icon-btn searchBoxToggler"><i
                                        class="far fa-search"></i></button>
                                <button type="button" class="icon-btn sideMenuToggler d-none d-xl-block"><i
                                        class="far fa-cart-shopping"></i> <span class="badge">{{ CartItemCount }}</span></button>

                                <!-- Header with Profile Button -->
                                <div class="flex justify-end mb-1">
                                    <div class="relative">
                                        <!-- Profile Button -->
                                        <button id="profileBtn" type="button" class="icon-btn d-none d-xxl-block">
                                            <span class="text-gray-700 font-medium"><i class="far fa-user"></i></span>
                                        </button>

                                        <!-- Dropdown Menu -->
                                        <div id="dropdownMenu"
                                            class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible transform scale-95 transition-all duration-200 z-50">
                                            <div class="py-2">
                                                <!-- User Info -->
                                                <div class="px-4 py-3 border-gray-100">
                                                    <div class="flex items-center space-x-3">
                                                        <div
                                                            class="w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold">
                                                            U
                                                        </div>
                                                        <div>
                                                            {% if request.user.is_authenticated %}
                                                                <p class="text-sm font-medium text-gray-900">{{ request.user.username }}</p>
                                                                <p class="text-xs text-gray-500">{{ request.user.email }}</p>
                                                            {% else %}
                                                                <p class="text-sm font-medium text-gray-900">Guest User</p>
                                                                <p class="text-xs text-gray-500">guest@example.com</p>
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Menu Items -->

                                                {% if request.user.is_authenticated %}
            {% if request.user.role == "admin" %}         
                                                <div class="border-t border-gray-100 mt-2 pt-2">
                                                    <a href="{% url 'admin_dashboard' %}"
                                                        class="flex items-center px-4 py-2 text-sm text-black-600 hover:bg-green-50 transition-colors duration-150">
                                                        AdminDashboard
                                                    </a>
                                                </div>
            {% endif %}
                                                <div class="border-t border-gray-100 mt-2 pt-2">
                                                    <a href="{% url 'logout' %}"
                                                        class="flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-150">
                                                        <svg class="w-4 h-4 mr-3 text-red-500" fill="none"
                                                            stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                stroke-width="2"
                                                                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                                                            </path>
                                                        </svg>
                                                        Logout
                                                    </a>
                                                </div>
                                                {% else %}
                                                <div class="border-t border-gray-100 mt-2 pt-2">
                                                    <a href="{% url 'loginPage' %}"
                                                        class="flex items-center px-4 py-2 text-sm text-dark-600 hover:bg-dark-50 transition-colors duration-150">
                                                        Login
                                                    </a>
                                                </div>

                                                <div class="border-t border-gray-100 mt-2 pt-2">
                                                    <a href="{% url 'registerPage' %}"
                                                        class="flex items-center px-4 py-2 text-sm text-dark-600 hover:bg-dark-50 transition-colors duration-150">
                                                        Register
                                                    </a>
                                                </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>